<?xml version="1.0"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>http://alpha6.ru/blog/tag/slic3r/</id>
    <title>Just another blog</title>
    <updated>2016-09-04T23:33:48Z</updated>
    <link href="http://alpha6.ru/blog/tag/slic3r.atom" rel="self" />
    <link href="http://alpha6.ru/blog/tag/slic3r/" rel="alternate" />
    <generator version="0.077">Statocles</generator>
    <entry>
        <id>http://alpha6.ru/blog/2016/09/04/marlin-adding-second-extruder/</id>
        <title>Добавляем второй экструдер к RAMPS 1.4/Marlin</title>
        <link href="http://alpha6.ru/blog/2016/09/04/marlin-adding-second-extruder/" rel="alternate" />
        <content type="html"><![CDATA[
            <p>В прошлой серии мы установили прошивку Marin и откалибровали все это дело. Теперь пришло время добавить второй экструдер.</p>

<p>Для этого нам понадобится:</p>

<ul>
<li>второй экструдер</li>
<li>второй хот-энд в сборе и все прилегающие детали, типа трубки боудена</li>
<li>каретка на два экструдера. Я использую <a href="http://www.thingiverse.com/thing:1749633">такую</a>.</li>
</ul>

<p>В общем случае все просто идем в Arduino IDE и правим конфигурацию.</p>

<p>Меняем конфигурацию платы управления на RAMPS 1.4 c 2 экструдерами и подогреваемым столом</p>

<pre><code>#ifndef MOTHERBOARD
  #define MOTHERBOARD BOARD_RAMPS_14_EEB
#endif
</code></pre>

<p>Указываем кол-во экструдеров:</p>

<pre><code>#define EXTRUDERS 2
</code></pre>

<p>Указываем тип датчика температуры для второго экструдера:</p>

<pre><code>#define TEMP_SENSOR_1 1
</code></pre>

<p>Максимальную температуру:</p>

<pre><code>#define HEATER_1_MAXTEMP 250
</code></pre>

<p>Если надо, устанавливаем направление вращения мотора:</p>

<pre><code>#define INVERT_E1_DIR true
</code></pre>

<p>В целом, если у вас одинаковые моторы на обоих экструдерах, то на этом настройка закончена.</p>

<p>Но если у моторы разные или  на одном экструдере у меня мотор с шестерней подачи диаметром 10мм, а на втором - 7мм, то тут начинаются проблемы с калибровкой.</p>

<p>Как откалибровать второй экструдер?
Идем в пронтерфейс и говорим:</p>

<pre><code>T1
</code></pre>

<p>Эта команда указывает что сейчас активен экструдер номер 2 (отсчет начинается с 0). Включаем подачу филамента, для подачи будет использоваться число шагов из прошивки, т.е. для первого экструдера. Смотрим разницу и с помощью пропорции получаем кол-во шагов для активного экструдера. У меня из-за разницы в подающих шестернях получилось 80 шагов на мм.</p>

<p>Говорим:</p>

<pre><code>M92 E80
</code></pre>

<p>Этим мы устанавливаем новое кол-во шагов для текущего экструдера. Проверяем, при необходимости подгоняем значение.</p>

<p>После калибровки вылезает проблема - Marlin не поддерживает установку разного числа шагов для разных экструдеров, соответственно в прошивке нам эти данные не сохранить. Придется этот вопрос решать програмно.</p>

<p>Идем в <code>Slic3r</code>, я, в основном, использую его, для других слайсеров будут отличия. Переходим на вкладку <code>Printer Setting -&gt; Custom G-Code</code>.
Нас интересует поле <code>Tool change G-Code</code>. Код в этом поле будет вызываться при каждой смене экструдера.
Пишем туда следующее:</p>

<pre><code>[[previous_extruder==0]]
M92 E80
[[/previous_extruder==0]]
[[previous_extruder==1]]
M92 E95
[[/previous_extruder==1]]
</code></pre>

<p>Этот макрос дает следующий эффект - если мы переключились с экструдера 1, то выставляем число шагов текущего экструдера (второго) равным значению которое мы получили при калибровке, в моем случае это 80.
Если мы переключились со второго экструдера на первый - то выставляем для него значение числа шагов равное значению из прошивки.</p>

<p>Дальше идем в <code>Extruder 2</code> и выставляем смещение. Если вся эта конструкция собрана на каретке ссылку на которую я давал выше - то смещение по оси X  будет 24, по Y - 0. Для других кареток надо мерять и выставлять фактические значения.</p>

<p>После этого печатаем деталь для <a href="http://www.thingiverse.com/thing:124450">калибровки 2х экструдеров</a> и точно подгоняем все для идеальной работы.</p>

                <p><a href="http://alpha6.ru/blog/2016/09/04/marlin-adding-second-extruder/#section-2">Continue reading...</a></p>
            <p>Tags:
                <a href="http://alpha6.ru/blog/tag/prusai3/">prusai3</a>
                <a href="http://alpha6.ru/blog/tag/marlin/">marlin</a>
                <a href="http://alpha6.ru/blog/tag/slic3r/">Slic3r</a>
            </p>
        ]]></content>
        <updated>2016-09-04T00:00:00Z</updated>
        <category term="prusai3" />
        <category term="marlin" />
        <category term="Slic3r" />
    </entry>
</feed>

